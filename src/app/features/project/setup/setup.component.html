<app-page-header
  title="Project Setup"
  description="Define the project basics and load a page preview to validate the target URL.">
</app-page-header>

<div class="two-column-layout">
  <div class="left-column">
    <mat-card class="form-card">
      <mat-card-content>
        <p class="mandatory-note">The mandatory fields are marked with an asterisk <span class="asterisk-red">*</span></p>
        <form [formGroup]="form" (ngSubmit)="onSave()">
          <div class="form-field-wrapper">
            <label class="field-label">
              Project name
              <span class="required-asterisk">*</span>
            </label>
            <p class="field-helper">Enter a descriptive name for your project.</p>
            <mat-form-field appearance="outline" class="brief-input">
              <input matInput formControlName="name" required>
              <mat-error *ngIf="form.get('name')?.hasError('required')">
                Name is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field-wrapper">
            <label class="field-label">
              Page URL
              <span class="required-asterisk">*</span>
            </label>
            <p class="field-helper">Enter the URL of the page you want to optimize.</p>
            <mat-form-field appearance="outline" class="brief-input">
              <input matInput formControlName="pageUrl" type="url" required>
              <mat-error *ngIf="form.get('pageUrl')?.hasError('required')">
                Page URL is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field-wrapper">
            <label class="field-label">Industry</label>
            <p class="field-helper">Specify the industry or sector this project belongs to.</p>
            <mat-form-field appearance="outline" class="brief-input" floatLabel="always">
              <mat-select formControlName="industry">
                <mat-option *ngFor="let industry of industries" [value]="industry">
                  {{ industry }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="form-field-wrapper">
            <label class="field-label">Notes</label>
            <p class="field-helper">Add any additional notes or context about this project.</p>
            <mat-form-field appearance="outline" class="brief-input">
              <textarea matInput formControlName="notes" rows="2"></textarea>
            </mat-form-field>
          </div>

          <div class="actions">
            <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
              Save
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="right-column">
    <app-preview-panel
      [previewHtml]="previewHtml"
      [previewUrl]="pageUrl"
      [loading]="loadingPreview"
      [useIframe]="useIframe"
      [showReset]="false"
      [originalHtml]="originalPreviewHtml"
      (reload)="loadPreview()">
    </app-preview-panel>
  </div>
</div>

